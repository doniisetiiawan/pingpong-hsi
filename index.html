<!DOCTYPE html>
<html>
  <head>
    <title>Ping Pong</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  </head>
  <body>
    <label for="username">Username:</label
    ><input type="text" id="username" />
    <button id="ping">Ping</button>
    <ul id="info"></ul>
    <script>
      var socket = io.connect("http://localhost:4000");
      var $username = $("#username"),
        $ping = $("#ping"),
        $info = $("#info");

      function addLi(message) {
        $info.append("<li>" + message + "</li>");
      }

      $username.on("change", function() {
        socket.emit('join', {username: $username.val()});
      });

      socket.on("userJoined", function(data) {
        addLi(data.username + ' has joined');
      });

      $ping.on("click", function() {
        socket.emit("ping", {username: $username.val()});
      });

      socket.on('ping', function(data){
        addLi(data.username + ' has pinged!');
      });
    </script>
  </body>
</html>
